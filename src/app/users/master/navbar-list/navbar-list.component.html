<div class="navbar-list-container">
  <h2 class="navbar-list-heading">Navbar List</h2>
  <!-- Filters -->
  <form [formGroup]="filterForm" (ngSubmit)="applyFilters()" class="filter-form">
    <div class="filter-section">
      <h3 class="filter-section-title">Search & Filter</h3>
      <div class="filter-grid">
        <!-- Search -->
        <div class="form-group">
          <label class="form-label">Search</label>
          <div class="input-with-icon">
            <i class="fas fa-search"></i>
            <input type="text" formControlName="search" placeholder="Search by menu name..." class="form-control">
          </div>
        </div>
        
        <!-- Menu Type -->
        <div class="form-group">
          <label class="form-label">Menu Type</label>
          <div class="select-wrapper">
            <i class="fas fa-sitemap"></i>
            <select formControlName="isSubMenu" class="form-control">
              <option value="">All Menus</option>
              <option value="true">Sub Menus Only</option>
              <option value="false">Parent Menus Only</option>
            </select>
          </div>
        </div>
        
        <!-- Access Roles Multi-Select Dropdown -->
        <div class="form-group">
          <label class="form-label">Access Roles</label>
          <div class="multi-select-dropdown" [class.open]="accessDropdownOpen" (clickOutside)="closeAccessDropdown()">
            <div class="dropdown-header" (click)="toggleAccessDropdown()">
              <span class="selected-items">
                {{ getSelectedAccessLabels() || 'Select roles...' }}
              </span>
              <i class="fas fa-chevron-down dropdown-arrow"></i>
            </div>
            <div class="dropdown-options" *ngIf="accessDropdownOpen">
              <div class="search-box">
                <i class="fas fa-search"></i>
                <input 
                  type="text" 
                  placeholder="Search roles..." 
                  [(ngModel)]="accessSearchText"
                  (input)="filterAccessOptions()"
                  (click)="$event.stopPropagation()"
                >
              </div>
              <div class="options-list">
                <div 
                  *ngFor="let option of filteredAccessOptions" 
                  class="dropdown-option"
                  (click)="toggleAccessOption(option.value)"
                >
                  <div class="option-checkbox">
                    <input 
                      type="checkbox" 
                      [checked]="filterForm.value.access.includes(option.value)"
                      (click)="$event.stopPropagation()"
                    >
                    <span class="checkmark"></span>
                  </div>
                  <span class="option-label">{{ option.label }}</span>
                </div>
                <div *ngIf="filteredAccessOptions.length === 0" class="no-results">
                  No matching roles found
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Toggle Options -->
        <div class="form-group toggle-options">        
          <div class="toggle-option">
            <label class="switch">
              <input type="checkbox" formControlName="showInActive">
              <span class="slider round"></span>
            </label>
            <span class="toggle-label">Show Inactive Items</span>
          </div>
        </div>
      </div>
      
      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" (click)="resetFilters()" class="btn btn-outline-secondary">
          <i class="fas fa-undo"></i> Reset
        </button>
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-filter"></i> Apply Filters
        </button>
      </div>
    </div>
  </form>

  <!-- Table -->
  <div class="navbar-list-table-wrapper">
    <table class="navbar-list-table">
      <colgroup>
        <col class="col-icon">
        <col class="col-name">
        <col class="col-link">
        <col class="col-status">
        <col class="col-status">
        <col class="col-access">
        <col class="col-access">
        <col class="col-access">
        <col class="col-access">
        <col class="col-access">
        <col class="col-access">
        <col class="col-access">
        <col class="col-access">
        <col class="col-actions sticky-col">
      </colgroup>
      <thead>
        <tr>
          <th>Icon</th>
          <th>Menu Name</th>
          <th>Menu Link</th>
          <th>Redirection</th>
          <th>Sub Menu</th>
          <th>Master</th>
          <th>Admin</th>
          <th>User</th>
          <th>Doctor</th>
          <th>Seller</th>
          <th>Rider</th>
          <th>Customer Care</th>
          <th>Guest</th>
          <th class="sticky-col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items" class="navbar-list-row">
          <td>
            <img *ngIf="item.svgFileDataLink" [src]="item.svgFileDataLink" alt="icon" class="navbar-svg" />
          </td>
          <td>{{ item.menuName }}</td>
          <td class="menu-link-cell">
            <div class="menu-link">{{ item.menuLink || '-' }}</div>
            <div class="created-date">
              <small class="text-muted">{{ item.createdDate ? ('Created: ' + (item.createdDate | date:'mediumDate')) : '' }}</small>
            </div>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.doHaveRedirectionLink ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" 
               [matTooltip]="'Redirection: ' + item.doHaveRedirectionLink">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.isASubMenu ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Submenu: ' + item.isASubMenu">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.canMasterAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Master Access: ' + item.canMasterAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.canAdminAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Admin Access: ' + item.canAdminAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.canUserAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'User Access: ' + item.canUserAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.canDoctorAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Doctor Access: ' + item.canDoctorAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.canSellerAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Seller Access: ' + item.canSellerAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.canRiderAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Rider Access: ' + item.canRiderAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.customerCareAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Customer Care: ' + item.customerCareAccess">
            </i>
          </td>
          <td class="text-center">
            <i class="fas" 
               [ngClass]="item.isVisibleToGuest ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'"
               [matTooltip]="'Visible to Guest: ' + item.isVisibleToGuest">
            </i>
          </td>
          <td class="sticky-col">
            <div class="navbar-actions">
              <button mat-icon-button (click)="editItem(item.id)" class="action-btn edit-btn" matTooltip="Edit">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button (click)="viewItem(item.id)" class="action-btn view-btn" matTooltip="View">
                <mat-icon>visibility</mat-icon>
              </button>
              <button mat-icon-button (click)="$event.stopPropagation(); deleteItem(item)" class="action-btn delete-btn" matTooltip="Delete">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- State Messages -->
    <div *ngIf="loading" class="status-message">Loading...</div>
    <div *ngIf="!hasMore && !loading && items.length" class="status-message">No more records.</div>
    <div *ngIf="!items.length && !loading" class="status-message no-records">No records found.</div>
  </div>
</div>
