<div class="navbar-list-container">
  <h2 class="navbar-list-heading">Navbar List</h2>
  <!-- Filters -->
  <form [formGroup]="filterForm" (ngSubmit)="onFilter()" class="filter-area">
    <input formControlName="search" type="text" placeholder="Search by menu name..." />

    <select formControlName="isSubMenu">
      <option value="">All Menus</option>
      <option value="true">Sub Menus</option>
      <option value="false">Main Menus</option>
    </select>

    <label class="checkbox-label">
      <input type="checkbox" formControlName="showGuest" />
      Visible to Guest
    </label>

    <!-- Custom Multi-Select Dropdown for Access Roles -->
    <div class="multi-select-dropdown" [class.open]="accessDropdownOpen" tabindex="0" (click)="toggleAccessDropdown()" (blur)="closeAccessDropdown()">
      <div class="dropdown-selected">
        <span *ngIf="!selectedAccessLabels.length">Select Access Roles</span>
        <span *ngIf="selectedAccessLabels.length">{{ selectedAccessLabels.join(', ') }}</span>
        <i class="fas fa-chevron-down"></i>
      </div>
      <div class="dropdown-list" *ngIf="accessDropdownOpen">
        <label *ngFor="let option of accessOptions" class="dropdown-option">
          <input type="checkbox" [checked]="filterForm.value.access.includes(option.value)" (change)="onAccessCheckboxChange(option.value, $event)" />
          {{ option.label }}
        </label>
      </div>
    </div>

    <button type="submit">Apply Filters</button>
  </form>

  <!-- Table -->
  <div class="navbar-list-table-wrapper">
    <table class="navbar-list-table">
      <thead>
        <tr>
          <th>Icon</th>
          <th>Menu Name</th>
          <th>Menu Link</th>
          <th>Redirection</th>
          <th>Sub Menu</th>
          <th>Master</th>
          <th>Admin</th>
          <th>User</th>
          <th>Doctor</th>
          <th>Seller</th>
          <th>Rider</th>
          <th>Chat</th>
          <th>Customer Care</th>
          <th>Guest</th>
          <th>Assigned</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items" class="navbar-list-row">
          <td>
            <img *ngIf="item.svgFileDataLink" [src]="item.svgFileDataLink" alt="icon" class="navbar-svg" />
          </td>
          <td>{{ item.menuName }}</td>
          <td>{{ item.menuLink }}</td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.doHaveRedirectionLink ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" [title]="item.doHaveRedirectionLink ? 'Has Redirection' : 'No Redirection'"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.isASubMenu ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Is Sub Menu"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.canMasterAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Master Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.canAdminAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Admin Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.canUserAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="User Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.canDoctorAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Doctor Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.canSellerAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Seller Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.canRiderAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Rider Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.chatUsersAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Chat Users Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.customerCareAccess ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Customer Care Access"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.isVisibleToGuest ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Visible to Guest"></i>
          </td>
          <td class="text-center">
            <i class="fas" [ngClass]="item.isAssignedToParentMenu ? 'fa-check-circle text-success' : 'fa-times-circle text-danger'" title="Assigned to Parent Menu"></i>
          </td>
          <td class="navbar-actions">
            <button (click)="onEdit(item)" title="Edit" class="icon-btn">
              <i class="fas fa-edit"></i>
            </button>
            <button (click)="onDelete(item)" title="Delete" class="icon-btn">
              <i class="fas fa-trash-alt"></i>
            </button>
            <button (click)="onView(item)" title="View" class="icon-btn">
              <i class="fas fa-eye"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- State Messages -->
    <div *ngIf="loading" class="status-message">Loading...</div>
    <div *ngIf="!hasMore && !loading && items.length" class="status-message">No more records.</div>
    <div *ngIf="!items.length && !loading" class="status-message no-records">No records found.</div>
  </div>
</div>
